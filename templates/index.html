<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>(Ebuss) Sentiment Based Product Recommendations</title>
<style>
 body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:2rem;}
 .container{max-width:880px;margin:0 auto;}
 h1{font-size:1.6rem;margin-bottom:.5rem;}
 form{margin:1rem 0;display:flex;gap:.5rem;}
 input[type=text]{flex:1;padding:.6rem .7rem;border:1px solid #ccc;border-radius:8px;}
 button{padding:.6rem 1rem;border:0;border-radius:8px;background:#4f46e5;color:#fff;cursor:pointer}
 button:hover{background:#4338ca}
 .examples span{display:inline-block;background:#f2f2ff;color:#333;padding:.25rem .5rem;border-radius:6px;margin-right:.4rem;font-size:.9rem;cursor:pointer}
 .msg{margin:.5rem 0 1rem;color:#b91c1c;}
 .grid{display:grid;grid-template-columns:1fr 1fr;gap:1.2rem;}
 .card{border:1px solid #e5e7eb;border-radius:12px;padding:1rem;}
 .muted{color:#666;font-size:.9rem;}
 ul{margin:.5rem 0 0 1rem;} li{margin:.2rem 0;}
 .foot{margin-top:2rem;color:#666;font-size:.85rem;}
 code{background:#f6f8fa;padding:2px 6px;border-radius:6px;}
</style>
</head>
<body>
<div class="container">
  <h1>(Ebuss) Sentiment Based Product Recommendations</h1>
  <div class="muted">Recommender: Item-KNN (Top 20) & (Top 5 based on sentiment)</div>

  <form method="POST">
    <input type="text" name="username" placeholder="Enter an existing reviews_usernameâ€¦" value="{{ username }}">
    <button type="submit">Recommend</button>
  </form>

  {% if message %}<div class="msg">{{ message }}</div>{% endif %}

  <div class="examples muted">
    Examples:
    {% for u in examples %}
      <span onclick="document.querySelector('[name=username]').value='{{u}}'">{{ u }}</span>
    {% endfor %}
  </div>

  <div class="grid">
    <div class="card">
      <h3>Top-5 (final)</h3>
      {% if top5 %}
        <ul>
          {% for pid, name in top5 %}
            <li><strong>{{ name }}</strong> <span class="muted">({{ pid }})</span></li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="muted">No results yet.</div>
      {% endif %}
    </div>

    <div class="card">
      <h3>Top-20 (from CF)</h3>
      {% if top20 %}
        <ul>
          {% for pid, name in top20 %}
            <li>{{ name }} <span class="muted">({{ pid }})</span></li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="muted">Submit a username to see CF candidates.</div>
      {% endif %}
    </div>
  </div>
</div>
</body>
</html>
